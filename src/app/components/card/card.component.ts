import { Component, Input } from '@angular/core';
import { Card } from '../../models';
import { BoardService } from '../../board.service';

@Component({
  selector: 'app-card',
  standalone: false,
  templateUrl: './card.component.html',
  styleUrls: ['./card.component.css']
})
export class CardComponent {
  @Input() card!: Card;
  @Input() boardId!: string; // Ajouter une propriété pour l'ID du tableau
  isEditing: boolean = false;
  constructor(private boardService: BoardService) {}

  markAsComplete() {
    this.boardService.markCardAsComplete(this.boardId, this.card.id); // Marquer la carte comme complète
    console.log(`Tâche "${this.card.title}" marquée comme complète.`);
  }

  editTask() {
    this.isEditing = true;
  }

  onCardSave(updatedCard: Card) {
    // Logique pour mettre à jour la carte avec les nouvelles données
    this.card.title = updatedCard.title;
    this.card.description = updatedCard.description;
    this.card.labels = updatedCard.labels;
    this.card.dueDate = updatedCard.dueDate;
    this.card.priority = updatedCard.priority;
    this.card.assignedTo = updatedCard.assignedTo;
    this.isEditing = false; // Fermer le formulaire
  }

  onCardCancel() {
    this.isEditing = false;
  }
}
